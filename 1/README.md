Почему
--

На самом деле задачу можно решить в одну команду (если пайпы считать одной командой) в *nix.

Можно решить через рекурсию.

Но лучше этого не делать, поскольку в задаче явно указано что уровень влоденности неизвестен. А php имеет ограничение на вложенность рекурсии. А уровень вложенности в системах может, потенциально, быть очень и очень большим.

Но писать решение без рекурсии мне откровенно лень, оно в разы сложнее решения с рекурсией и заморачиваться так с этим заданием - ну такое.

Так что я все же использую рекурсию.
